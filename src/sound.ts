import { zzfx, zzfxP, zzfxM, zzfxX} from './zzfx';

let myAudioNode: AudioBufferSourceNode = null;
let isPlaying = false;
let audioContext: AudioContext = zzfxX;
export const playDead = () => {
  // zzfx(...[1.07,,127,0.02,0.01,0.01,2,2.63,,7.6,677,0.02,,,,0.4,,0.61,0.22,0.04,]); // Random 75
  zzfx(...[1.1,,229,,,.31,4,2.38,-0.7,-3,,,,.4,,.2,,.88,.01]); // Hit 111
};
export const playSong = () => {
  isPlaying = true;
  if(myAudioNode){
    audioContext.resume();
    return;
  }
  // const song = [[[,0,400,,.02,.5,,,,.1,,.1,,,,,,,.01],[,0]],[[[,,4,,,,4,,,,2,,,,4,,,,2,,,,4,,,,2,,,,4,,,,2,,,,4,,,,2,,,,4,,,,2,,,,4,,,,,,,,,,,,],[1,1,5,7,9,7,9,7,,7,,7,,7,,7,9,7,9,7,9,7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]]],[0],,{"title":"New Song","instruments":["Instrument 0","Instrument 1"],"patterns":["Pattern 0"]}]
  // const song = [[[,0,232,.01,.09,.15,2,,,,,,154.87,,,,.26],[2,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5]],[[[,,18,,,,18,,,,22,,,,18,,,,18,,,,24,,,,18,,,,18,,,,22,,,,18,,,,18,,,,25,,,,18,,,,18,,,,24,,,,18,,,,],[,.6,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,6,,6,,6,,6,,2,,2,,2,,2,,3,,3,,3,,3,,3,,3,,3,,3,,3,,],[1,-.6,8,8,7,8,8,8,7,7,,,,,8,8,8,7,7,7,8,4,4,,,,7,7,8,8,7,7,,7,7,,,,8,,8,,7,,7,,8,,8,,7,,8,8,8,8,7,,,,4,4,4,7,,,],[,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]]],[0],,{"title":"KurveSpace2","instruments":["Hall Brass","Hihat"],"patterns":["Pattern 0"]}]
  // const song = [[[,0,232,.01,.09,2,2,,,,,,154.87,,,,.26],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1],[.8,0,2100,,,.2,3,3,,,-400,,,2],[.7,0,22,,.07,.07,2,0,,,.5,.01]],[[[,-.5,9,,,,,,,,,,,,,,,,7,,,,,,,,,,,,,,,,4,,,,,,,,,,,,,,,,5,,,,,,,,,,,,,,,,],[,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],[[,-.5,9,,,,,,,,,,,,,,,,7,,,,,,,,,,,,,,,,4,,,,,,,,,,,,,,,,5,,,,,,,,,,,,,,,,],[,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[2,-1,,,,,,,,,,,,,,,2,,,,,,,,,,,,,,,,2,,,,2,,,,,,,,,,,,,,,,2,,,,,,,,,,,,,,],[1,1,7,,,,4,,,,7,,,,4,,,,7,,7,,4,,,,7,,,,4,,4,,7,,,,4,,,,7,,,,4,,,,7,,,,4,,,,7,,,,4,,,,]],[[,-.5,9,,,,,,,,,,,,,,,,7,,,,,,,,,,,,,,,,4,,,,,,,,,,,,,,,,5,,,,,,,,,,,,,,,,],[3,,30,,30,,29,,,,30,,,,29,,,,30,,30,,29,,,,30,,,,29,,,,30,,,,29,,,,30,,,,29,,,,30,,30,,29,,,,30,,,,29,,,,],[2,-1,,,,,,,,,,,,,,,2,,,,,,,,,,,,,,,,2,,,,2,,,,,,,,,,,,,,,,2,,,,,,,,,,,,,,],[1,1,7,,,,4,,,,7,,,,4,,,,7,,7,,4,,,,7,,,,4,,4,,7,,,,4,,,,7,,,,4,,,,7,,,,4,,,,7,,,,4,,,,]]],[0,1,2],,{"title":"KurveSpace3","instruments":["Hall Brass","Claps","Hihat Open","Korg Bass"],"patterns":["Pattern 0","Pattern 1","Pattern 2"]}]
  const song = [[[.7,0,22,,.07,.07,2,0,,,.5,.01],[.8,0,2100,,,.2,3,3,,,-400,,,2],[2,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.9,0,143,,,.35,3],[.7,0,22,,.07,.5,2,0,,,.5,.01]],[[[3,-1,9,9,7,9,,,,,9,9,7,9,,,,,9,9,7,9,,,,,9,9,7,9,,12,14,16,9,9,7,5,,,,,5,5,4,2,,,,,5,5,4,2,,2,,2,,4,,5,,7,,8],[,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],[[3,-1,9,9,7,9,,,,,9,9,7,9,,,,,9,9,7,9,,,,,9,9,7,9,,12,14,16,9,9,7,5,,,,,5,5,4,2,,,,,5,5,4,2,,2,,2,,4,,5,,7,,8],[,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,-1,1,,,,,,,,9,,,,,,,,1,,,,,,,,9,,,,,,,,1,,,,,,,,9,,,,,,,,1,,,,,,,,9,,9,,9,,,,],[2,1,7,,7,,7,,7,,7,,7,,7,,7,,9,,9,,9,,9,,9,,9,,9,,9,,7,,7,,7,,7,,7,,7,,7,,7,,9,,9,,9,7,9,7,9,7,9,7,9,7,9,7]],[[3,-1,9,9,7,9,,,,,9,9,7,9,,,,,9,9,7,9,,,,,9,9,7,9,,12,14,16,9,9,7,5,,,,,5,5,4,2,,,,,5,5,4,2,,2,,2,,4,,5,,7,,8],[,1,,,29,,,,29,,,,29,,,,29,,,,29,,,,29,,,,29,,,,24,,,,24,,,,24,,,,22,,,,22,,,,22,,,,22,,,,22,,,,22,,],[1,-1,1,,,,,,,,9,,,,,,,,1,,,,,,,,9,,,,,,,,1,,,,,,,,9,,,,,,,,1,,,,,,,,9,,9,,9,,,,],[2,1,7,,7,,7,,7,,7,,7,,7,,7,,9,,9,,9,,9,,9,,9,,9,,9,,7,,7,,7,,7,,7,,7,,7,,7,,9,,9,,9,7,9,7,9,7,9,7,9,7,9,7]],[[3,-1,9,,9,,7,,9,,,,9,,9,,7,,9,,11,,12,,,,9,,9,,9,,12,,14,,14,,14,,12,,14,,14,,,,12,,14,,12,,,,16,,,,17,,,,,,],[4,1,29,,,,,,,,29,,,,,,,,29,,,,32,,,,34,,,,,,,,34,,,,,,,,34,,,,,,,,34,,,,,,,,34,,,,29,,,,],[1,-1,,,,,7,,,,,,,,9,,,,,,,,7,,,,,,,,9,,,,,,,,7,,,,,,,,9,,,,,,,,11,,,,,,,,9,,,,],[2,1,7,,7,,7,,7,,7,,7,,7,,7,,9,,9,,9,,9,,9,,9,,9,,9,,7,,7,,7,,7,,7,,7,,7,,7,,9,,9,,9,7,9,7,9,7,9,7,9,7,9,7]]],[0,1,2,2,2,3,2,2,2,3,2,2,2,3,2,2,2,3,2,2,2,3,2,2,2,3],,{}]
  let mySongData = zzfxM(...song);
  
  // Play the song (returns a AudioBufferSourceNode)
  myAudioNode = zzfxP(...mySongData);
  myAudioNode.loop = true
}

export const stopSong = () => {
  isPlaying = false;
  audioContext.suspend();
}
export const toggleSond = () => {
  if(isPlaying){
    stopSong();
  } else{
    playSong();
  }
}
